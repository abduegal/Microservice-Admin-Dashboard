<h2>Services Graph</h2>

<p>Add more application by editing the <code>discover.namespace</code> in your config.yml. </p>

<div class="col-md-9">
  <!-- Nav tabs -->
  <ul class="nav nav-tabs">
    <li ng-class="{active: namespace === currentnamespace}" data-ng-click="setCurrentNamespace(namespace)"
        data-ng-repeat="namespace in model.namespaces"><a href>{{namespace}}</a></li>
  </ul>

  <div id="chart" ng-init="init()"></div>

</div>


 <div class="col-md-3">
   <!-- Nav tabs -->
   <ul class="nav nav-tabs" role="tablist">
     <li class="active"><a href data-target="#gauges" role="tab" data-toggle="tab">Gauges</a></li>
     <li><a href data-target="#timers" role="tab" data-toggle="tab">Timers</a></li>
     <li><a href data-target="#counters" role="tab" data-toggle="tab">Counters</a></li>
     <li><a href data-target="#meters" role="tab" data-toggle="tab">Meters</a></li>
   </ul>

   <!-- Tab panes -->
   <div class="tab-content sideoverview">
     <div class="tab-pane active" id="gauges">
       <table class="table table-bordered">
         <tr data-ng-repeat="(gaugetype, values) in model.data.gauges">
           <th rowspan="{{values.length}}">{{gaugetype}}</th>
           <td>
          <span data-ng-repeat="(key, value) in values">
            {{key}}: <strong>{{value.value |  textOrNumber:1}}</strong><br/>
          </span>
           </td>
         </tr>
         </span>
       </table>
     </div>

     <div class="tab-pane" id="timers">
       <table class="table table-bordered" data-ng-repeat="(title, values) in model.data.timers">
         <tr>
           <th colspan="2">{{title}}</th>
         </tr>
          <tr data-ng-repeat="(key, value) in values">
            <td>{{key}}:</td> <td><strong>{{value}}</strong></td>
          </tr>
           </td>
         </tr>
         </span>
       </table>
     </div>
     <div class="tab-pane" id="counters">
       <table class="table table-bordered" data-ng-repeat="(title, values) in model.data.counters">
         <tr>
           <th colspan="2">{{title}}</th>
         </tr>
         <tr data-ng-repeat="(key, value) in values">
           <td>{{key}}:</td> <td><strong>{{value}}</strong></td>
         </tr>
         </td>
         </tr>
         </span>
       </table>
     </div>
     <div class="tab-pane" id="meters">
       <table class="table table-bordered" data-ng-repeat="(title, values) in model.data.meters">
       <tr>
         <th colspan="2">{{title}}</th>
       </tr>
       <tr data-ng-repeat="(key, value) in values">
         <td>{{key}}:</td> <td><strong>{{value}}</strong></td>
       </tr>
       </td>
       </tr>
       </span>
     </table></div>
   </div>

 </div>

<div class="row">
  <div class="col-xs-4">
    <div class="chart-info" ng-if="model.data.name">

      <table class="table">
        <tr><td>Servicename:</td> <th>{{model.data.name}}</th></tr>
        <tr><td>Location:</td> <th>{{model.data.location}}</th></tr>
          <tr><td>Ping:</td>
              <th>
                  <span data-ng-show="model.data.ping" class="label label-success">Success</span>
            <span data-ng-hide="model.data.ping" class="label label-danger">
              Failed
            </span>
              </th>
          </tr>
        <tr><td>Healthchecks:</td>
          <th>
            <span data-ng-show="model.data.healthcheck" class="label label-success">Success</span>
            <span data-ng-hide="model.data.healthcheck" class="label label-danger">
              Failed
            </span>
            <a href data-ng-click="doHealthCheck(model.data)">Rerun</a>
          </th>
        </tr>
          <tr><td>Details:</td>
              <pre>{{model.data.healthcheckDetails}}</pre>
      </table>

    </div>
  </div>
  <div class="col-xs-8">
    <br/>
    <div class="btn-group pull-right">
      <button type="button" class="btn btn-success" data-ng-class="{disabled: healtchecksToggled}"
              data-ng-click="allHealthChecks()">Run
        all
        healthchecks</button>
      <button type="button" class="btn btn-default"  data-ng-class="{disabled: !healtchecksToggled}"
              data-ng-click="undoHealtChecksColors()">Group by type</button>
    </div>

    <ng-include src="'views/hystrix.html'"/>

  </div>
</div>